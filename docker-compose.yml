services:
  tg_post_service:
    build: .
    image: ghcr.io/${IMAGE_REPO:-your_org/your_repo}:latest
    restart: unless-stopped
    healthcheck:
      test: ["CMD-SHELL", "pgrep -f \"python main.py\" >/dev/null || exit 1"]
      interval: 30s
      timeout: 5s
      retries: 3
    env_file:
      - .env
    working_dir: /app
    volumes:
      - ./logs:/app/logs
      - ./tg_post_service.db:/app/tg_post_service.db
      - ./openai_system_prompt.txt:/app/openai_system_prompt.txt:ro
      - ./sessions:/app/sessions
      - ./.env:/app/.env
